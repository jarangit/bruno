(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{7309:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var t=n(266),a=n(809),i=n.n(a),s=n(7294),c=n(3855),o=n(2809),l=n(1163),u=n(7536),d=n(911),f=n(3918),p=n(4480),x=n(5893);function h(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function m(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?h(Object(n),!0).forEach((function(r){(0,o.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var v={name:"",mobile_number:"",email:"",line_id:"",room_count:"",building_id:"",floor_id:"",device_ids:[]},g=function(e){var r=e.airSelected,n=e.setDataForm,a=e.oldData,c=(0,s.useState)(""),o=c[0],h=c[1],g=(0,s.useState)(),j=g[0],b=g[1],w=(0,s.useState)([]),y=w[0],_=w[1],N=(0,s.useState)(!1),C=N[0],k=N[1],O=(0,l.useRouter)(),A=((0,s.useRef)(),(0,u.cI)({defaultValues:v})),S=(A.register,A.handleSubmit),D=A.reset,I=(A.setValue,A.control),P=A.watch,B=A.formState.errors,E=function(){var e=(0,t.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),!(t=m(m({},n),{},{building_id:j,device_ids:r}))||!o){e.next=5;break}return e.next=5,(0,f.H1)(t,o);case 5:D(m({},v)),k(!1),O.push("/");case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();console.log(B);var q=function(){var e=(0,t.Z)(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,(0,d.J)(o);case 3:(r=e.sent)&&_(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){console.log("main re");var e=(0,p.L)("token"),r=(0,p.L)("currentBuildingID");return e&&r&&(h(e),b(r),q()),a&&D(a),function(){}}),[o]),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("form",{onSubmit:S(E),className:"my-10",onChange:function(){var e=P();n(e)},children:[(0,x.jsxs)("div",{className:"flex md:flex-col lg:flex-row gap-5",children:[(0,x.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-5 bg-[#262626] p-4 rounded-lg",children:[(0,x.jsx)(u.Qr,{control:I,name:"building_id",render:function(e){var r=e.field,n=r.onChange;r.onBlur,r.value,r.ref;return(0,x.jsx)(x.Fragment,{children:y&&(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e2d\u0e32\u0e04\u0e32\u0e23"}),(0,x.jsx)("select",{disabled:!0,className:"max-w-[120px] bg-[#707070] rounded-full",name:"build",id:"",onChange:n,children:y.map((function(e,r){return(0,x.jsx)("option",{value:e.id,selected:e.id==j,children:e.name},r)}))})]})})}}),(0,x.jsx)(u.Qr,{control:I,name:"floor_id",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e0a\u0e31\u0e49\u0e19"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.floor_id&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e0a\u0e31\u0e49\u0e19",className:"mainInput max-w-[120px]",value:t,onChange:n})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"room_count",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e2b\u0e49\u0e2d\u0e07"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.room_count&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e2b\u0e49\u0e2d\u0e07",className:"mainInput max-w-[120px]",value:t,onChange:n})]})]})}})]}),(0,x.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-5 p-4",children:[(0,x.jsx)(u.Qr,{control:I,name:"name",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.name&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32",className:"mainInput",value:t,onChange:n})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"mobile_number",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.mobile_number&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23",className:"mainInput",value:t,onChange:n})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"email",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"Email"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.email&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"Email",className:"mainInput",value:t,onChange:n})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"line_id",rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"ID Line"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:B.line_id&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"ID Line",className:"mainInput",value:t,onChange:n})]})]})}})]})]}),(0,x.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:(0,x.jsx)("button",{type:"submit",className:"but_gray",children:C?"Loading...":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"})})]})})},j=n(9669),b=n.n(j),w=function(){var e=(0,t.Z)(i().mark((function e(r,n){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b().get("".concat("https://api.airin1.com/api/","devices?building_id=").concat(n),{headers:{Authorization:"Bearer ".concat(r),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});case 3:return t=e.sent,a=t.data,t.status,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r,n){return e.apply(this,arguments)}}(),y=n(3583),_=n.n(y),N=function(e){var r=(0,s.useState)(!1),n=r[0],a=r[1],o=(0,s.useState)(""),l=o[0],u=o[1],d=(0,s.useState)(),f=d[0],h=d[1],m=(0,s.useState)(),v=m[0],j=m[1],b=(0,s.useState)([]),y=b[0],N=(b[1],(0,s.useState)()),C=N[0],k=N[1];console.log("%cMyProject%cline:16%cdataForm","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(248, 147, 29);padding:3px;border-radius:2px",C);var O=function(){var e=(0,t.Z)(i().mark((function e(){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=8;break}return e.next=3,w(l,f);case 3:r=e.sent,console.log("%cMyProject%cline:20%cdata","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(161, 23, 21);padding:3px;border-radius:2px",r),n=r.filter((function(e){return 1===e.device_type_id})),console.log("%cMyProject%cline:21%cfilterData","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(34, 8, 7);padding:3px;border-radius:2px",n),j(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=(0,p.L)("token"),r=(0,p.L)("currentBuildingID");return e&&r&&(u(e),h(r),O()),function(){}}),[l,y]),(0,x.jsxs)("div",{className:"box_black",children:[(0,x.jsxs)("div",{className:_().title,children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("img",{src:"/svg/add.svg",alt:"",width:30,className:"icon"}),(0,x.jsx)("h3",{children:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"})]}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"but_gray text-center flex justify-center",onClick:function(){return a(!n)},children:n?"\u0e01\u0e25\u0e31\u0e1a":"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 AIR"})})]}),(0,x.jsx)("div",{children:n?(0,x.jsx)(c.do,{data:v,title:"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 Air",airSelected:y}):(0,x.jsx)("div",{className:_().box_form,children:(0,x.jsx)(g,{airSelected:y,setDataForm:k,oldData:C})})})]})}},911:function(e,r,n){"use strict";n.d(r,{J:function(){return o},T:function(){return l}});var t=n(266),a=n(809),i=n.n(a),s=n(9669),c=n.n(s),o=function(){var e=(0,t.Z)(i().mark((function e(r){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("".concat("https://api.airin1.com/api/","buildings"),{headers:{Authorization:"Bearer ".concat(r),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});case 3:return n=e.sent,t=n.data,n.status,e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,t.Z)(i().mark((function e(r,n,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c().patch("".concat("https://api.airin1.com/api/","buildings/").concat(n,"/unit_price"),t,{headers:{Authorization:"Bearer ".concat(r),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}).then((function(e){console.log(e.data)})));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()},382:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/add_user",function(){return n(7309)}])},3583:function(e){e.exports={title:"addUser_title__1tIbC"}}},function(e){e.O(0,[675,536,778,774,888,179],(function(){return r=382,e(e.s=r);var r}));var r=e.O();_N_E=r}]);