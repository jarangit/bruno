(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{7309:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return N}});var t=r(266),a=r(809),i=r.n(a),s=r(7294),c=r(3855),l=r(2809),o=r(1163),u=r(7536),d=r(911),f=r(3918),p=r(4480),x=r(5893);function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(Object(r),!0).forEach((function(n){(0,l.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var v={name:"",mobile_number:"",email:"",line_id:"",room_count:"",building_id:"",floor_id:"",device_ids:[]},j=function(e){var n=e.floorData,r=e.airSelected,a=e.setDataForm,c=e.oldData,l=(0,s.useState)(""),h=l[0],j=l[1],g=(0,s.useState)(),b=g[0],w=g[1],_=(0,s.useState)([]),y=_[0],N=_[1],C=(0,s.useState)(!1),O=C[0],k=C[1],A=(0,o.useRouter)(),S=((0,s.useRef)(),(0,u.cI)({defaultValues:v})),D=(S.register,S.handleSubmit),B=S.reset,I=(S.setValue,S.control),E=S.watch,P=S.formState.errors,q=function(){var e=(0,t.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(!0),!(t=m(m({},n),{},{building_id:b,device_ids:r}))||!h){e.next=5;break}return e.next=5,(0,f.H1)(t,h);case 5:B(m({},v)),k(!1),A.push("/");case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();console.log(P);var Z=function(){var e=(0,t.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=5;break}return e.next=3,(0,d.J)(h);case 3:(n=e.sent)&&N(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=(0,p.L)("token"),n=(0,p.L)("currentBuildingID");return e&&n&&(j(e),w(n),Z()),c&&B(c),function(){}}),[h]),(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("form",{onSubmit:D(q),className:"my-10",onChange:function(){var e=E();a(e)},children:[(0,x.jsxs)("div",{className:"flex md:flex-col lg:flex-row gap-5",children:[(0,x.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-5 bg-[#262626] p-4 rounded-lg",children:[(0,x.jsx)(u.Qr,{control:I,name:"building_id",render:function(e){var n=e.field,r=n.onChange;n.onBlur,n.value,n.ref;return(0,x.jsx)(x.Fragment,{children:y&&(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e2d\u0e32\u0e04\u0e32\u0e23"}),(0,x.jsx)("select",{disabled:!0,className:"px-2 max-w-[120px] bg-[#707070] rounded-full",name:"build",id:"",onChange:r,children:y.map((function(e,n){return(0,x.jsx)("option",{value:e.id,selected:e.id==b,children:e.name},n)}))})]})})}}),(0,x.jsx)(u.Qr,{control:I,name:"floor_id",rules:{required:!0},render:function(e){var r=e.field,t=r.onChange,a=(r.onBlur,r.value);r.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e0a\u0e31\u0e49\u0e19"}),(0,x.jsx)("select",{className:"px-2 max-w-[120px] bg-[#707070] rounded-full",name:"build",id:"",onChange:t,value:a,children:n&&n.map((function(e,n){return(0,x.jsx)("option",{value:e.id,selected:e.id==b,children:e.name},n)}))})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"room_count",rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,t=(n.onBlur,n.value);n.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e2b\u0e49\u0e2d\u0e07"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:P.room_count&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e2b\u0e49\u0e2d\u0e07",className:"mainInput max-w-[120px]",value:t,onChange:r})]})]})}})]}),(0,x.jsxs)("div",{className:"lg:w-1/2 flex flex-col gap-5 p-4",children:[(0,x.jsx)(u.Qr,{control:I,name:"name",rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,t=(n.onBlur,n.value);n.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:P.name&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e0a\u0e37\u0e48\u0e2d\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32",className:"mainInput",value:t,onChange:r})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"mobile_number",rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,t=(n.onBlur,n.value);n.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:P.mobile_number&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"\u0e40\u0e1a\u0e2d\u0e23\u0e4c\u0e42\u0e17\u0e23",className:"mainInput",value:t,onChange:r})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"email",rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,t=(n.onBlur,n.value);n.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"Email"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:P.email&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"Email",className:"mainInput",value:t,onChange:r})]})]})}}),(0,x.jsx)(u.Qr,{control:I,name:"line_id",rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,t=(n.onBlur,n.value);n.ref;return(0,x.jsxs)("div",{className:"flex justify-between",children:[(0,x.jsx)("div",{children:"ID Line"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-red-700 mr-2 text-lg",children:P.line_id&&(0,x.jsx)("span",{children:"*"})}),(0,x.jsx)("input",{type:"text",placeholder:"ID Line",className:"mainInput",value:t,onChange:r})]})]})}})]})]}),(0,x.jsx)("div",{style:{textAlign:"center",marginTop:"30px"},children:(0,x.jsx)("button",{type:"submit",className:"but_gray",children:O?"Loading...":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"})})]})})},g=r(9669),b=r.n(g),w=function(){var e=(0,t.Z)(i().mark((function e(n,r){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b().get("".concat("https://api.airin1.com/api/","devices?building_id=").concat(r),{headers:{Authorization:"Bearer ".concat(n),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});case 3:return t=e.sent,a=t.data,t.status,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,r){return e.apply(this,arguments)}}(),_=r(3583),y=r.n(_),N=function(e){var n=(0,s.useState)(!1),r=n[0],a=n[1],l=(0,s.useState)(""),o=l[0],u=l[1],d=(0,s.useState)(),h=d[0],m=d[1],v=(0,s.useState)(),g=v[0],b=v[1],_=(0,s.useState)([]),N=_[0],C=(_[1],(0,s.useState)()),O=C[0],k=C[1],A=(0,s.useState)(),S=A[0],D=A[1];console.log("%cMyProject%cline:18%cfloorData","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(38, 157, 128);padding:3px;border-radius:2px",S);var B=function(){var e=(0,t.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return e.next=3,w(o,h);case 3:n=e.sent,r=n.filter((function(e){return 1===e.device_type_id})),b(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,t.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=6;break}return e.next=3,(0,f.zz)(o,h);case 3:n=e.sent,r=n.filter((function(e){return!0===e.is_two_level})),D(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){var e=(0,p.L)("token"),n=(0,p.L)("currentBuildingID");return e&&n&&(u(e),m(n),B(),I()),function(){}}),[o,N]),(0,x.jsxs)("div",{className:"box_black",children:[(0,x.jsxs)("div",{className:y().title,children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("img",{src:"/svg/add.svg",alt:"",width:30,className:"icon"}),(0,x.jsx)("h3",{children:"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"})]}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"but_gray text-center flex justify-center",onClick:function(){return a(!r)},children:r?"\u0e01\u0e25\u0e31\u0e1a":"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 AIR"})})]}),(0,x.jsx)("div",{children:r?(0,x.jsx)(c.do,{data:g,title:"\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23 Air",airSelected:N}):(0,x.jsx)("div",{className:y().box_form,children:(0,x.jsx)(j,{airSelected:N,setDataForm:k,oldData:O,floorData:S})})})]})}},911:function(e,n,r){"use strict";r.d(n,{J:function(){return l},T:function(){return o}});var t=r(266),a=r(809),i=r.n(a),s=r(9669),c=r.n(s),l=function(){var e=(0,t.Z)(i().mark((function e(n){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get("".concat("https://api.airin1.com/api/","buildings"),{headers:{Authorization:"Bearer ".concat(n),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});case 3:return r=e.sent,t=r.data,r.status,e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,t.Z)(i().mark((function e(n,r,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c().patch("".concat("https://api.airin1.com/api/","buildings/").concat(r,"/unit_price"),t,{headers:{Authorization:"Bearer ".concat(n),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}).then((function(e){console.log(e.data)})));case 1:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}()},382:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/add_user",function(){return r(7309)}])},3583:function(e){e.exports={title:"addUser_title__1tIbC"}}},function(e){e.O(0,[675,536,778,774,888,179],(function(){return n=382,e(e.s=n);var n}));var n=e.O();_N_E=n}]);