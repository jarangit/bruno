(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{5626:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return B}});var t=n(1664),o=n(1163),c=n(7294),a=n(5998),i=n(2809),d=n(3328),s=n(5376),u=n(5893);function l(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function f(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}d.kL.register(d.uw,d.f$,d.od,d.jn,d.ST,d.u,d.De);var p=["-1","0","1"],g=["#FF4967","#FFA726","#56D9FE"],b={plugins:{legend:{display:!1}},responsive:!0,maintainAspectRatio:!1,scales:{y:{display:!1},x:{grid:{color:"#595959"}}}};function x(e,r){var n=g[0],t=g[1],o=g[2],c=e.createLinearGradient(0,r.top,550,r.bottom);return c.addColorStop(0,n),c.addColorStop(.5,t),c.addColorStop(1,o),c}function h(e){var r=e.dataGraph,n={labels:p,datasets:[{label:"Dataset 1",data:r.length>0?r.map((function(e){return e.unit_price})):"",tension:.5,pointRadius:0}]},t=(0,c.useRef)(null),o=(0,c.useState)({datasets:[]}),a=o[0],i=o[1];return(0,c.useEffect)((function(){var e=t.current;if(e){var r=f(f({},n),{},{datasets:n.datasets.map((function(r){return f(f({},r),{},{borderColor:x(e.ctx,e.chartArea)})}))});i(r)}}),[]),(0,u.jsx)(u.Fragment,{children:r.length>0?(0,u.jsx)(s.kL,{ref:t,type:"line",data:a,options:b}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.kL,{ref:t,type:"line",className:"relative",data:a,options:b}),(0,u.jsx)("div",{className:" absolute top-1/2 left-[45%]",children:"No Data"})]})})}var j=n(1508),m=n(266),v=n(809),k=n.n(v),y=n(9059),_=n.n(y),P=n(7536),w=n(911),O=n(9198),N=n.n(O),S=(n(7276),function(e){var r=e.setTime,n=e.current,t=e.onChange;console.log("%cMyProject%cline:11%ccurrent","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(17, 63, 61);padding:3px;border-radius:2px",n);var o=(0,c.useState)(new Date),a=o[0],i=o[1];return(0,c.useEffect)((function(){var e=parseFloat(n.slice(0,2)),r=parseFloat(n.slice(3,5));console.log("%cMyProject%cline:34%cminute","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(114, 83, 52);padding:3px;border-radius:2px",r),console.log("%cMyProject%cline:32%chour","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(118, 77, 57);padding:3px;border-radius:2px",e);var t=(new Date).setHours(e,r,0,0);console.log("%cMyProject%cline:36%cnow","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(237, 222, 139);padding:3px;border-radius:2px",t),t&&i(new Date(t))}),[n]),(0,u.jsx)("div",{className:"relative iconDatePicker",children:(0,u.jsx)(N(),{className:"bg-[#707070] w-[115px] px-3 rounded-full cursor-pointer",selected:a,onChange:function(e){return t(function(e){console.log("%cMyProject%cline:16%cdate","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(130, 57, 53);padding:3px;border-radius:2px",e);var n=e.getHours();console.log("%cMyProject%cline:18%chour","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(178, 190, 126);padding:3px;border-radius:2px",n);var t=e.getMinutes(),o="".concat(n<=9?"0".concat(n):n,":").concat(t<=9?"0".concat(t):t);return console.log("%cMyProject%cline:17%ctime","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(89, 61, 67);padding:3px;border-radius:2px",o),o&&(i(e),r(o)),o}(e))},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,timeCaption:"Time",dateFormat:"h:mm aa"})})});function T(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function C(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach((function(r){(0,i.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var D=function(e){var r=e.data,n=e.token,t=e.currentBId,a=(0,c.useState)(""),i=a[0],d=a[1];console.log("%cMyProject%cline:21%cisToken","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(39, 72, 98);padding:3px;border-radius:2px",i);var s=(0,c.useState)(""),l=s[0],f=s[1];console.log("%cMyProject%cline:23%cbuildingId","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(89, 61, 67);padding:3px;border-radius:2px",l);var p=(0,c.useState)(!1),g=p[0],b=p[1],x=(0,c.useState)([]),h=(x[0],x[1],(0,c.useState)("")),v=(h[0],h[1]),y=(0,c.useState)(""),O=(y[0],y[1],(0,o.useRouter)(),(0,P.cI)({defaultValues:{user:[{from_time:"",name:"",to_time:"",unit_price:""}]}})),N=(O.register,O.control),T=O.handleSubmit,D=O.reset,E=(O.trigger,O.setError,(0,P.Dq)({control:N,name:"user"})),F=E.fields,A=(E.append,(0,c.useCallback)(function(){var e=(0,m.Z)(k().mark((function e(r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),console.log("%cMyProject%cline:47%cbuildingId","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(17, 63, 61);padding:3px;border-radius:2px",l),console.log("%cMyProject%cline:47%cisToken","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(130, 57, 53);padding:3px;border-radius:2px",i),!i||!l){e.next=7;break}return e.next=6,(0,w.T)(i,l,r.user);case 6:b(!1);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[i,l]));return(0,c.useEffect)((function(){if(n&&(d(n),f(t)),r.length){var e={user:(0,j.Z)(r)};D(e)}}),[r,n,t]),(0,u.jsx)(u.Fragment,{children:r.length>0?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("form",{action:"",onSubmit:T(A),children:[(0,u.jsxs)("table",{className:_().table,children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Priority"}),(0,u.jsx)("th",{children:"Name"}),(0,u.jsx)("th",{children:"Time Zone"}),(0,u.jsx)("th",{children:"Unit Price"})]})}),(0,u.jsx)("tbody",{className:"text-center",children:F.map((function(e,r){return(0,u.jsxs)("tr",{className:"text-center",children:[(0,u.jsx)("td",{children:r+1}),(0,u.jsx)("td",{children:(0,u.jsx)(P.Qr,{render:function(e){var r=e.field;return(0,u.jsx)("input",C(C({},r),{},{className:"w-[70px] bg-[#707070] text-center rounded-full"}))},name:"user.".concat(r,".name"),control:N})}),(0,u.jsxs)("td",{className:"flex gap-3 justify-center",children:[(0,u.jsx)(P.Qr,{render:function(e){var r=e.field;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S,{current:r.value,setTime:v,onChange:r.onChange})})},name:"user.".concat(r,".from_time"),control:N}),(0,u.jsx)("div",{children:"To"}),(0,u.jsx)(P.Qr,{name:"user.".concat(r,".to_time"),control:N,render:function(e){var r=e.field;return(0,u.jsx)(S,{current:r.value,setTime:v,onChange:r.onChange})}})]}),(0,u.jsx)("td",{children:(0,u.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,u.jsx)(P.Qr,{render:function(e){var r=e.field;return(0,u.jsx)("input",C(C({},r),{},{className:"w-[70px] bg-black border-solid border-[#FF4967] text-center rounded-full"}))},name:"user.".concat(r,".unit_price"),control:N}),(0,u.jsx)("div",{children:"THB/kWh"})]})})]},r)}))})]}),(0,u.jsx)("div",{className:"w-ful text-center mt-6",children:(0,u.jsx)("button",{type:"submit",className:"but_gray text-center",children:g?"Loading...":"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"})})]})}):(0,u.jsx)("div",{className:" h-24 flex items-center justify-center",children:"No Data"})})},E=n(7788),F=n(8957),A=n.n(F),M=n(4480),B=function(e){var r=(0,a.I0)(),n=(0,o.useRouter)(),i=(0,a.v9)((function(e){return e.building})).data,d=(0,a.v9)((function(e){return e.allBuildings})),s=(0,c.useState)(""),l=s[0],f=s[1];console.log("%cMyProject%cline:19%cisToken","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(114, 83, 52);padding:3px;border-radius:2px",l);var p=(0,c.useState)(),g=p[0],b=p[1];return console.log("%cMyProject%cline:20%ccurrentBId","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(96, 143, 159);padding:3px;border-radius:2px",g),(0,c.useEffect)((function(){var e=localStorage.getItem("token"),t=(0,M.L)("currentBuildingID");e&&t?(r((0,E.v)(Number(t))),f(e),b(t)):n.push("/signin")}),[d.currentBuilding]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t.default,{href:"/",children:(0,u.jsx)("img",{src:"svg/arrowLeft.svg",className:"icon",width:40,style:{margin:"0px"},alt:""})}),(0,u.jsxs)("div",{className:"box_black",children:[(0,u.jsxs)("div",{className:A().title,children:[(0,u.jsx)("img",{src:"/svg/gear.svg",alt:"",width:20,className:"icon"}),(0,u.jsx)("p",{children:"Unit Price Setting "})]}),(0,u.jsxs)("div",{className:A().boxGraph,children:[(0,u.jsxs)("div",{className:A().boxGrapgL,children:[(0,u.jsxs)("p",{className:A().bath,children:["\u0e2a\u0e01\u0e38\u0e25\u0e40\u0e07\u0e34\u0e19",(0,u.jsx)("span",{children:"THB"})]}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{children:"Price/Time Zone"})})]}),(0,u.jsx)("div",{className:"".concat(A().graph," relative"),children:i?(0,u.jsx)(h,{dataGraph:i.unit_price}):null})]}),(0,u.jsx)("div",{children:i&&l&&g?(0,u.jsx)(D,{data:i.unit_price||[],token:l,currentBId:g}):"no data"})]})]})}},911:function(e,r,n){"use strict";n.d(r,{J:function(){return d},T:function(){return s}});var t=n(266),o=n(809),c=n.n(o),a=n(9669),i=n.n(a),d=function(){var e=(0,t.Z)(c().mark((function e(r){var n,t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get("".concat("https://api.airin1.com/api/","buildings"),{headers:{Authorization:"Bearer ".concat(r),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}});case 3:return n=e.sent,t=n.data,n.status,e.abrupt("return",t);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(r){return e.apply(this,arguments)}}(),s=function(){var e=(0,t.Z)(c().mark((function e(r,n,t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i().patch("".concat("https://api.airin1.com/api/","buildings/").concat(n,"/unit_price"),t,{headers:{Authorization:"Bearer ".concat(r),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}}).then((function(e){console.log(e.data)})));case 1:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()},6515:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return n(5626)}])},8957:function(e){e.exports={title:"settingPage_title__3qnJP",boxGraph:"settingPage_boxGraph__2y9Jr",boxGrapgL:"settingPage_boxGrapgL__3OaJ6",graph:"settingPage_graph__zKETm",bath:"settingPage_bath__2EMtT"}},9059:function(e){e.exports={table:"settingTable_table__egSQ9",name:"settingTable_name__31NDq",fillSelect:"settingTable_fillSelect__2byq3",unitPrice:"settingTable_unitPrice__XyaKE"}}},function(e){e.O(0,[774,570,536,996,532,888,179],(function(){return r=6515,e(e.s=r);var r}));var r=e.O();_N_E=r}]);