(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1968:function(e,t,s){"use strict";s(7294);var r=s(2639),n=s(7095),i=s.n(n),a=s(1664),c=s(5893);t.Z=function(e){var t=e.data,s=e.typeUser;return(0,c.jsxs)("div",{className:i().userList,children:[(0,c.jsxs)("div",{className:i().title,children:[(0,c.jsx)("h1",{children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e49\u0e2d\u0e07"}),(0,c.jsx)(a.default,{href:"/user/add_user/",children:(0,c.jsx)("a",{children:(0,c.jsxs)("h3",{className:"flex items-center",children:[(0,c.jsx)("span",{children:(0,c.jsx)("img",{src:"/svg/add.svg",width:20,className:"icon",alt:""})}),"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"]})})})]}),(0,c.jsx)("div",{className:"gap-5 grid  grid-cols-1 lg:grid-cols-2",children:t&&t.length?t.map((function(e,t){return(0,c.jsx)(r.Z,{data:e,typeUser:s},t)})):"\u0e44\u0e21\u0e48\u0e1e\u0e1a\u0e23\u0e32\u0e22\u0e01\u0e32\u0e23"})]})}},2639:function(e,t,s){"use strict";var r=s(1664),n=s(7294),i=s(6497),a=s.n(i),c=s(5893);t.Z=function(e){var t=e.data,s=e.typeUser,i=(0,n.useState)(t),l=(i[0],i[1],t.id),o=t.name,d=(t.lname,t.tell,t.line,t.email,t.floor_id);return(0,c.jsxs)("div",{className:a().userListItem,children:[(0,c.jsxs)("figure",{className:a().item,children:[(0,c.jsx)("img",{src:"/svg/".concat(s?"userOrange.svg":"builder.svg"),width:40,className:"icon",alt:""}),(0,c.jsx)("figcaption",{children:(0,c.jsxs)("section",{children:[(0,c.jsxs)("p",{children:["\u0e0a\u0e31\u0e49\u0e19: ",d]}),(0,c.jsxs)("p",{children:["\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32: ",(0,c.jsx)("span",{children:"".concat(o," ")})]})]})})]}),(0,c.jsx)(r.default,{href:"/user/".concat(l),children:(0,c.jsxs)("figure",{className:a().item,children:[(0,c.jsx)("img",{src:"/svg/calculate.svg",width:40,className:"icon",alt:""}),(0,c.jsx)("figcaption",{children:(0,c.jsx)("p",{children:"\u0e04\u0e34\u0e14\u0e04\u0e48\u0e32\u0e44\u0e1f"})})]})})]})}},9258:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var r=s(266),n=s(5523),i=s(809),a=s.n(i),c=s(1163),l=s(9008),o=s(7294),d=s(381),u=s.n(d),x=s(2322),m=s.n(x),h=s(8986),f=s(5893),g=function(e){var t=e.text,s=e.onClick;return(0,f.jsx)("div",{alt:t,onClick:s,children:(0,f.jsx)("img",{src:"/svg/markerMap.svg",alt:"",width:"25px"})})};g.defaultProps={onClick:null};var v=g,p=function(e){e.coordinates,e.setcoordinates,e.setbounds;var t=e.lat,s=e.lng;return(0,f.jsx)("div",{className:"map",style:{height:"300px",width:"100%"},children:(0,f.jsx)(h.ZP,{bootstrapURLKeys:{key:"AIzaSyB4Zxfe4I4S9qjPyVT0cG6Hy8FF8_gK-9o"},defaultCenter:{lat:13.736717,lng:100.523186},defaultZoom:10,yesIWantToUseGoogleMapApiInternals:!0,margin:[50,50,50,50],onGoogleApiLoaded:function(e){e.map,e.maps;return"Loadiing"},children:(0,f.jsx)(v,{lat:t,lng:s,text:"marker"})})})},j=function(e){var t=e.temperature,s=e.lat,r=e.lng,n=e.weather_outsides,i=e.total_floor,a=e.total_user,c=new Date,l=function(){var e=u()();return(0,f.jsxs)("div",{className:"flex gap-1",children:[(0,f.jsx)("div",{children:"".concat(e.hours()<=9?"0".concat(e.hours()):e.hours())}),(0,f.jsx)("div",{children:":"}),(0,f.jsx)("div",{children:"".concat(e.minutes()<=9?"0".concat(e.minutes()):e.minutes())})]})};return(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:m().title,children:(0,f.jsx)("h2",{children:" \u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22"})}),(0,f.jsxs)("div",{className:m().mainBox,children:[(0,f.jsxs)("div",{className:m().mainBox_item,children:[(0,f.jsxs)("div",{className:m().subItem,children:[(0,f.jsxs)("div",{className:"".concat(m().text,"  items-center flex"),children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"text-xl",children:c.getHours()<16?"\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e35\u0e15\u0e2d\u0e19\u0e40\u0e0a\u0e49\u0e32":"\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e35\u0e15\u0e2d\u0e19\u0e40\u0e22\u0e47\u0e19"}),(0,f.jsx)("p",{className:"text-sm",children:c.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),(0,f.jsx)("div",{className:"text-4xl",children:(0,f.jsx)(l,{})})]}),(0,f.jsxs)("section",{className:m().text,children:[(0,f.jsx)("div",{children:(0,f.jsx)("figure",{className:"icon",children:(0,f.jsx)("img",{src:"/svg/bearLine.svg",width:60,alt:""})})}),(0,f.jsx)("p",{children:"\u0e2a\u0e20\u0e32\u0e1e\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e40\u0e0a\u0e49\u0e32\u0e19\u0e35\u0e49\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e41\u0e08\u0e48\u0e21\u0e43\u0e2a \u0e14\u0e49\u0e32\u0e19\u0e19\u0e2d\u0e01\u0e21\u0e35\u0e41\u0e14\u0e14\u0e08\u0e49\u0e32"})]})]}),(0,f.jsx)("div",{className:m().subItem,children:(0,f.jsxs)("section",{className:m().weather,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-orange-400",children:"Bangkok"}),(0,f.jsxs)("div",{className:m().degree,children:[Math.round(t),(0,f.jsx)("span",{children:"\xbac"})]})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("figure",{className:"icon",children:(0,f.jsx)("img",{src:"/svg/sun.svg",width:60,alt:""})}),(0,f.jsx)("div",{children:n})]})]})})]}),(0,f.jsx)("div",{className:m().mainBox_item,children:(0,f.jsx)("div",{className:m().Gmap,children:(0,f.jsx)(p,{coordinates:void 0,setcoordinates:void 0,setbounds:void 0,lat:s,lng:r})})}),(0,f.jsxs)("div",{className:m().mainBox_item,children:[(0,f.jsx)("div",{className:m().subItem,children:(0,f.jsxs)("div",{className:m().subItem_right,children:[(0,f.jsx)("figure",{className:"icon",children:(0,f.jsx)("img",{src:"/svg/builder.svg",width:40,alt:""})}),(0,f.jsx)("p",{children:i}),(0,f.jsx)("p",{children:"\u0e0b\u0e31\u0e49\u0e19"})]})}),(0,f.jsx)("div",{className:m().subItem,children:(0,f.jsxs)("div",{className:m().subItem_right,children:[(0,f.jsx)("figure",{className:"icon",children:(0,f.jsx)("img",{src:"/svg/userOrange.svg",width:40,alt:""})}),(0,f.jsx)("p",{children:a}),(0,f.jsx)("p",{children:"\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e49\u0e32"})]})})]})]})]})},_=s(1968),N=s(8162),w=s(7788),b=s(5998),I=s(6413),y=s(4497),k=s(5675),B=s(733),D=s.n(B),L=function(e){return(0,f.jsx)("div",{className:"w-full flex justify-center h-[300px]  items-center ",children:(0,f.jsx)(D(),{type:"spin",color:"#fff"})})},S=s(1873),Z=function(e){var t=(0,o.useState)([]),s=t[0],r=t[1],n=(0,b.v9)((function(e){return e.allBuildings})),i=(0,b.I0)();return(0,o.useEffect)((function(){n&&n.data&&r(n.data)}),[n]),(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:"text-xl text-center my-6",children:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2d\u0e32\u0e04\u0e32\u0e23"}),s.length>0?(0,f.jsx)("div",{className:"grid  md:grid-cols-4 lg:grid-cols-6 gap-6 ",children:s.map((function(e,t){return(0,f.jsxs)("div",{onClick:function(){return t=e.id,i((0,y.E$)(Number(t))),void(0,S.q)("currentBuildingID",t);var t},className:"max-w-[300px] w-full rounded-lg bg-black overflow-hidden cursor-pointer drop-shadow-lg",children:[(0,f.jsx)("div",{className:" w-[auto] h-[100px] relative overflow-hidden ",children:(0,f.jsx)(k.default,{src:""!==e.picture?e.picture:"https://api.airin1.com/storage/img/tKcncQf5rAeziO6yq31k53z36oYl6X5nDiyYg8Zg.jpeg",alt:"",layout:"fill"})}),(0,f.jsx)("div",{className:"p-3 text-sm",children:(0,f.jsx)("div",{className:"",children:e.name})})]},t)}))}):(0,f.jsx)(L,{})]})},E=s(6245),P=function(){var e=(0,r.Z)(a().mark((function e(t){var s,r,n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return s=(0,E.Z)(t),r=s.exp,n=(new Date).getTime()/1e3,(i=n<r)||(window.localStorage.removeItem("token"),window.localStorage.removeItem("currentBuildingID"),window.location.reload()),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=s(4480),U=s(7388),G=s(1453),T=function(e){var t,s,i;(0,n.Z)(e);var d=(0,o.useState)(!0),u=(d[0],d[1],(0,c.useRouter)()),x=(0,o.useState)(),m=(x[0],x[1]),h=(0,o.useState)(),g=h[0],v=h[1],p=(0,o.useState)([]),k=p[0],B=p[1],D=(0,o.useState)(),S=D[0],E=D[1],T=(0,b.v9)((function(e){return e.building})),z=(0,b.v9)((function(e){return e.buildingList})),K=(0,b.v9)((function(e){return e.allBuildings})),O=(0,b.v9)((function(e){return e.userListByFloorID})),F=(0,b.v9)((function(e){return e.userListByRoomID}));console.log("%cMyProject%cline:42%cuserListByRoomID","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(248, 147, 29);padding:3px;border-radius:2px",F);var M=(0,o.useState)(),A=(M[0],M[1],(0,o.useState)(!1)),R=A[0],V=A[1],W=(0,b.I0)(),X=(0,o.useState)(),q=X[0],H=X[1];console.log("%cMyProject%cline:47%cuserList","color:#fff;background:#ee6f57;padding:3px;border-radius:2px","color:#fff;background:#1f3c88;padding:3px;border-radius:2px","color:#fff;background:rgb(56, 13, 49);padding:3px;border-radius:2px",q);var Y=function(){var e=(0,r.Z)(a().mark((function e(t){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.next=3,(0,N.a)("https://api.airin1.com/api/buildings",t);case 3:s=e.sent,W((0,y.T3)(s)),V(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)(a().mark((function e(t){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=(0,r.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K.floorID>0?W((0,U.u)({buildingID:t,floorID:K.floorID})):(console.log(" get room"),W((0,G.i)({buildingID:t,roomID:K.roomID})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=(0,C.L)("token"),t=localStorage.getItem("currentBuildingID");Q(e),e?(console.log("re-rendering"),Y(e),m(e),E(t),W((0,w.v)(t)),W((0,I.e)(t)),$(t),T.data&&z&&(v(T.data),B(z.data))):u.push("/signin"),O&&O.data?H(O.data):H(F.data)}),[k,g,K.currentBuilding,K.floorID,K.roomID,q]),(0,f.jsxs)("div",{children:[(0,f.jsxs)(l.default,{children:[(0,f.jsx)("title",{children:"Bruno"}),(0,f.jsx)("meta",{name:"description",content:"Bruno app"}),(0,f.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),S?(0,f.jsxs)(f.Fragment,{children:[T.data&&(null===(t=z.data)||void 0===t?void 0:t.length)>=0?(0,f.jsx)(j,{temperature:null===(s=T.data.weather_outsides[0])||void 0===s?void 0:s.temperature,lat:T.data.latitude,lng:T.data.longitude,weather_outsides:null===(i=T.data.weather_outsides[0])||void 0===i?void 0:i.weather_category,total_user:T.data.children.length,total_floor:z.data.length}):(0,f.jsx)(L,{}),R?(0,f.jsx)(L,{}):(0,f.jsx)(f.Fragment,{children:z.data?(0,f.jsx)("div",{children:K.floorID>0||K.roomID>0?(0,f.jsx)(_.Z,{data:K.floorID>0?O.data:F.data,typeUser:!0}):(0,f.jsx)(_.Z,{data:z.data,typeUser:!1})}):null})]}):(0,f.jsx)(Z,{})]})}},5301:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9258)}])},2322:function(e){e.exports={title:"monitor_title__et2K8",mainBox:"monitor_mainBox__1C4z8",subItem:"monitor_subItem__2Vzvv",weather:"monitor_weather__2oEV7",degree:"monitor_degree__1v12e",subItem_right:"monitor_subItem_right__20tEW",text:"monitor_text__WExwW",Gmap:"monitor_Gmap__GPUlI",mainBox_item:"monitor_mainBox_item__XKoPB"}},7095:function(e){e.exports={userList:"userList_userList__2j7Ym",title:"userList_title__2uStV",list:"userList_list__3-rs4"}},6497:function(e){e.exports={userListItem:"userListItem_userListItem__2Ol1z",item:"userListItem_item__31vKy"}}},function(e){e.O(0,[774,885,675,950,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);