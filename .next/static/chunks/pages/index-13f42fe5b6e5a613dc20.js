(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{1968:function(e,s,t){"use strict";t(7294);var i=t(2639),n=t(7095),r=t.n(n),a=t(1664),l=t(5893);s.Z=function(e){var s=e.data;return(0,l.jsxs)("div",{className:r().userList,children:[(0,l.jsxs)("div",{className:r().title,children:[(0,l.jsx)("h1",{children:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2b\u0e49\u0e2d\u0e07"}),(0,l.jsx)(a.default,{href:"/user/add_user/",children:(0,l.jsx)("a",{children:(0,l.jsxs)("h3",{className:"flex items-center",children:[(0,l.jsx)("span",{children:(0,l.jsx)("img",{src:"/svg/add.svg",width:20,className:"icon",alt:""})}),"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32"]})})})]}),(0,l.jsx)("div",{className:r().list,children:s&&s.map((function(e,s){return(0,l.jsx)(i.Z,{data:e},s)}))})]})}},2639:function(e,s,t){"use strict";var i=t(1664),n=t(7294),r=t(6497),a=t.n(r),l=t(5893);s.Z=function(e){var s=e.data,t=(0,n.useState)(s),r=(t[0],t[1],s.id),c=s.name,d=(s.lname,s.tell,s.line,s.email,s.floor_id);return(0,l.jsxs)("div",{className:a().userListItem,children:[(0,l.jsxs)("figure",{className:a().item,children:[(0,l.jsx)("img",{src:"/svg/builder.svg",width:40,className:"icon",alt:""}),(0,l.jsx)("figcaption",{children:(0,l.jsxs)("section",{children:[(0,l.jsxs)("p",{children:["\u0e0a\u0e31\u0e49\u0e19: ",d]}),(0,l.jsxs)("p",{children:["\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e48\u0e32: ",(0,l.jsx)("span",{children:"".concat(c," ")})]})]})})]}),(0,l.jsx)(i.default,{href:"/user/".concat(r),children:(0,l.jsxs)("figure",{className:a().item,children:[(0,l.jsx)("img",{src:"/svg/calculate.svg",width:40,className:"icon",alt:""}),(0,l.jsx)("figcaption",{children:(0,l.jsx)("p",{children:"\u0e04\u0e34\u0e14\u0e04\u0e48\u0e32\u0e44\u0e1f"})})]})})]})}},7816:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return G}});var i=t(266),n=t(5523),r=t(809),a=t.n(r),l=t(1163),c=t(9008),d=t(7294),o=t(381),u=t.n(o),x=t(2902),m=t.n(x),h=t(8986),v=t(5893),j=function(e){var s=e.text,t=e.onClick;return(0,v.jsx)("div",{alt:s,onClick:t,children:(0,v.jsx)("img",{src:"/svg/markerMap.svg",alt:"",width:"25px"})})};j.defaultProps={onClick:null};var g=j,f=function(e){e.coordinates,e.setcoordinates,e.setbounds;var s=e.lat,t=e.lng;return(0,v.jsx)("div",{className:"map",style:{height:"300px",width:"100%"},children:(0,v.jsx)(h.ZP,{bootstrapURLKeys:{key:"AIzaSyB4Zxfe4I4S9qjPyVT0cG6Hy8FF8_gK-9o"},defaultCenter:{lat:13.736717,lng:100.523186},defaultZoom:10,yesIWantToUseGoogleMapApiInternals:!0,margin:[50,50,50,50],onGoogleApiLoaded:function(e){e.map,e.maps;return"Loadiing"},children:(0,v.jsx)(g,{lat:s,lng:t,text:"marker"})})})},p=function(e){var s=e.temperature,t=e.lat,i=e.lng,n=e.weather_outsides,r=e.total_floor,a=e.total_user,l=new Date,c=function(){var e=u()();return(0,v.jsxs)("div",{className:"flex gap-1",children:[(0,v.jsx)("div",{children:"".concat(e.hours()<=9?"0".concat(e.hours()):e.hours())}),(0,v.jsx)("div",{children:":"}),(0,v.jsx)("div",{children:"".concat(e.minutes()<=9?"0".concat(e.minutes()):e.minutes())})]})};return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:m().title,children:(0,v.jsx)("h2",{children:" \u0e1b\u0e23\u0e30\u0e40\u0e17\u0e28\u0e44\u0e17\u0e22"})}),(0,v.jsxs)("div",{className:m().mainBox,children:[(0,v.jsxs)("div",{className:m().mainBox_item,children:[(0,v.jsxs)("div",{className:m().subItem,children:[(0,v.jsxs)("div",{className:"".concat(m().text,"  items-center flex"),children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-xl",children:l.getHours()<16?"\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e35\u0e15\u0e2d\u0e19\u0e40\u0e0a\u0e49\u0e32":"\u0e2a\u0e27\u0e31\u0e2a\u0e14\u0e35\u0e15\u0e2d\u0e19\u0e40\u0e22\u0e47\u0e19"}),(0,v.jsx)("p",{className:"text-sm",children:l.toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),(0,v.jsx)("div",{className:"text-4xl",children:(0,v.jsx)(c,{})})]}),(0,v.jsxs)("section",{className:m().text,children:[(0,v.jsx)("div",{children:(0,v.jsx)("figure",{className:"icon",children:(0,v.jsx)("img",{src:"/svg/bearLine.svg",width:60,alt:""})})}),(0,v.jsx)("p",{children:"\u0e2a\u0e20\u0e32\u0e1e\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e40\u0e0a\u0e49\u0e32\u0e19\u0e35\u0e49\u0e2d\u0e32\u0e01\u0e32\u0e28\u0e41\u0e08\u0e48\u0e21\u0e43\u0e2a \u0e14\u0e49\u0e32\u0e19\u0e19\u0e2d\u0e01\u0e21\u0e35\u0e41\u0e14\u0e14\u0e08\u0e49\u0e32"})]})]}),(0,v.jsx)("div",{className:m().subItem,children:(0,v.jsxs)("section",{className:m().weather,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"text-orange-400",children:"Bangkok"}),(0,v.jsxs)("div",{className:m().degree,children:[Math.round(s),(0,v.jsx)("span",{children:"\xbac"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("figure",{className:"icon",children:(0,v.jsx)("img",{src:"/svg/sun.svg",width:60,alt:""})}),(0,v.jsx)("div",{children:n})]})]})})]}),(0,v.jsx)("div",{className:m().mainBox_item,children:(0,v.jsx)("div",{className:m().Gmap,children:(0,v.jsx)(f,{coordinates:void 0,setcoordinates:void 0,setbounds:void 0,lat:t,lng:i})})}),(0,v.jsxs)("div",{className:m().mainBox_item,children:[(0,v.jsx)("div",{className:m().subItem,children:(0,v.jsxs)("div",{className:m().subItem_right,children:[(0,v.jsx)("figure",{className:"icon",children:(0,v.jsx)("img",{src:"/svg/builder.svg",width:40,alt:""})}),(0,v.jsx)("p",{children:r}),(0,v.jsx)("p",{children:"\u0e0b\u0e31\u0e49\u0e19"})]})}),(0,v.jsx)("div",{className:m().subItem,children:(0,v.jsxs)("div",{className:m().subItem_right,children:[(0,v.jsx)("figure",{className:"icon",children:(0,v.jsx)("img",{src:"/svg/userOrange.svg",width:40,alt:""})}),(0,v.jsx)("p",{children:a}),(0,v.jsx)("p",{children:"\u0e1c\u0e39\u0e49\u0e40\u0e0a\u0e49\u0e32"})]})})]})]})]})},_=t(1968),N=t(9669),w=t.n(N),I=function(){var e=(0,i.Z)(a().mark((function e(s,t){var i,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w().get(s,{headers:{Authorization:"Bearer ".concat(t)}});case 3:return i=e.sent,n=i.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(s,t){return e.apply(this,arguments)}}(),b=t(7788),k=t(5998),y=t(6413),B=t(4497),L=t(5675),S=t(733),E=t.n(S),Z=function(e){return(0,v.jsx)("div",{className:"w-full flex justify-center h-[300px]  items-center ",children:(0,v.jsx)(E(),{type:"spin",color:"#fff"})})},C=t(1873),z=function(e){var s=(0,d.useState)([]),t=s[0],i=s[1],n=(0,k.v9)((function(e){return e.allBuildings})),r=(0,k.I0)();console.log(n.data);return(0,d.useEffect)((function(){n.data.length>0&&i(n.data)}),[n]),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"text-xl text-center my-6",children:"\u0e01\u0e23\u0e38\u0e13\u0e32\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2d\u0e32\u0e04\u0e32\u0e23"}),t.length>0?(0,v.jsx)("div",{className:"grid  md:grid-cols-4 lg:grid-cols-6 gap-6 ",children:t.map((function(e,s){return(0,v.jsxs)("div",{onClick:function(){return s=e.id,console.log(s),r((0,B.E$)(Number(s))),void(0,C.q)("currentBuildingID",s);var s},className:"max-w-[300px] w-full rounded-lg bg-black overflow-hidden cursor-pointer drop-shadow-lg",children:[(0,v.jsx)("div",{className:" w-[auto] h-[100px] relative overflow-hidden ",children:(0,v.jsx)(L.default,{src:""!==e.picture?e.picture:"https://api.airin1.com/storage/img/tKcncQf5rAeziO6yq31k53z36oYl6X5nDiyYg8Zg.jpeg",alt:"",layout:"fill"})}),(0,v.jsx)("div",{className:"p-3 text-sm",children:(0,v.jsx)("div",{className:"",children:e.name})})]},s)}))}):(0,v.jsx)(Z,{})]})},G=function(e){var s,t,r;(0,n.Z)(e);var o=(0,l.useRouter)(),u=(0,d.useState)(),x=(u[0],u[1]),m=(0,d.useState)(),h=m[0],j=m[1],g=(0,d.useState)([]),f=g[0],N=g[1],w=(0,d.useState)(),L=w[0],S=w[1],E=(0,k.v9)((function(e){return e.building})),C=(0,k.v9)((function(e){return e.buildingList})),G=(0,k.v9)((function(e){return e.allBuildings})),P=(0,k.I0)(),K=function(){var e=(0,i.Z)(a().mark((function e(s){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I("https://api.airin1.com/api/buildings",s);case 2:t=e.sent,P((0,B.T3)(t));case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){var e=localStorage.getItem("token"),s=localStorage.getItem("currentBuildingID");e?(K(e),x(e),S(s),P((0,b.v)(s)),P((0,y.e)(s)),E&&C&&(j(E.data),N(C.data))):o.push("/signin")}),[f,h,G.currentBuilding]),(0,v.jsxs)("div",{children:[(0,v.jsxs)(c.default,{children:[(0,v.jsx)("title",{children:"Bruno"}),(0,v.jsx)("meta",{name:"description",content:"Bruno app"}),(0,v.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),L?(0,v.jsxs)(v.Fragment,{children:[E.data&&(null===(s=C.data)||void 0===s?void 0:s.length)>=0?(0,v.jsx)(p,{temperature:null===(t=E.data.weather_outsides[0])||void 0===t?void 0:t.temperature,lat:E.data.latitude,lng:E.data.longitude,weather_outsides:null===(r=E.data.weather_outsides[0])||void 0===r?void 0:r.weather_category,total_user:E.data.children.length,total_floor:C.data.length}):(0,v.jsx)(Z,{}),C.data?(0,v.jsx)(_.Z,{data:C.data}):null]}):(0,v.jsx)(z,{})]})}},5301:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7816)}])},2902:function(e){e.exports={title:"monitor_title__et2K8",mainBox:"monitor_mainBox__1C4z8",subItem:"monitor_subItem__2Vzvv",weather:"monitor_weather__2oEV7",degree:"monitor_degree__1v12e",subItem_right:"monitor_subItem_right__20tEW",text:"monitor_text__WExwW",Gmap:"monitor_Gmap__GPUlI",mainBox_item:"monitor_mainBox_item__XKoPB"}},7095:function(e){e.exports={userList:"userList_userList__2j7Ym",title:"userList_title__2uStV",list:"userList_list__3-rs4"}},6497:function(e){e.exports={userListItem:"userListItem_userListItem__2Ol1z",item:"userListItem_item__31vKy"}}},function(e){e.O(0,[774,885,873,483,888,179],(function(){return s=5301,e(e.s=s);var s}));var s=e.O();_N_E=s}]);